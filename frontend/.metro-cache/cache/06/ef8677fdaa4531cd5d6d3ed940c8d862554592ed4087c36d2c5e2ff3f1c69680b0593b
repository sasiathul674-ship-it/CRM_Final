{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":2,"column":39,"index":84}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"../contexts/AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":85},"end":{"line":3,"column":50,"index":135}}],"key":"oNCgyH4yx4pAIVZXLqqRGB2kuCY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useLeads = useLeads;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoConstants = require(_dependencyMap[1], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _contextsAuthContext = require(_dependencyMap[2], \"../contexts/AuthContext\");\n  function useLeads() {\n    const [leads, setLeads] = (0, _react.useState)([]);\n    const [loading, setLoading] = (0, _react.useState)(false);\n    const [error, setError] = (0, _react.useState)(null);\n    const {\n      token\n    } = (0, _contextsAuthContext.useAuth)();\n    const API_BASE_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || process.env.EXPO_PUBLIC_BACKEND_URL;\n    const fetchLeads = async () => {\n      if (!token) return;\n      setLoading(true);\n      setError(null);\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/leads`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        });\n        if (response.ok) {\n          const data = await response.json();\n          setLeads(data);\n        } else {\n          throw new Error('Failed to fetch leads');\n        }\n      } catch (err) {\n        setError(err.message);\n        console.error('Error fetching leads:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const createLead = async leadData => {\n      if (!token) return null;\n      setError(null);\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/leads`, {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(leadData)\n        });\n        if (response.ok) {\n          const newLead = await response.json();\n          setLeads(prev => [...prev, newLead]);\n          return newLead;\n        } else {\n          const errorData = await response.json();\n          throw new Error(errorData.detail || 'Failed to create lead');\n        }\n      } catch (err) {\n        setError(err.message);\n        console.error('Error creating lead:', err);\n        return null;\n      }\n    };\n    const updateLeadStage = async (leadId, stage) => {\n      if (!token) return false;\n      setError(null);\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/leads/${leadId}/stage?stage=${encodeURIComponent(stage)}`, {\n          method: 'PATCH',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        });\n        if (response.ok) {\n          // Update local state\n          setLeads(prev => prev.map(lead => lead.id === leadId ? {\n            ...lead,\n            stage,\n            last_interaction: new Date().toISOString()\n          } : lead));\n          return true;\n        } else {\n          throw new Error('Failed to update lead stage');\n        }\n      } catch (err) {\n        setError(err.message);\n        console.error('Error updating lead stage:', err);\n        return false;\n      }\n    };\n    const deleteLead = async leadId => {\n      if (!token) return false;\n      setError(null);\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/leads/${leadId}`, {\n          method: 'DELETE',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        });\n        if (response.ok) {\n          setLeads(prev => prev.filter(lead => lead.id !== leadId));\n          return true;\n        } else {\n          throw new Error('Failed to delete lead');\n        }\n      } catch (err) {\n        setError(err.message);\n        console.error('Error deleting lead:', err);\n        return false;\n      }\n    };\n    (0, _react.useEffect)(() => {\n      fetchLeads();\n    }, [token]);\n    return {\n      leads,\n      loading,\n      error,\n      fetchLeads,\n      createLead,\n      updateLeadStage,\n      deleteLead\n    };\n  }\n});","lineCount":139,"map":[[12,2,31,0,"exports"],[12,9,31,0],[12,10,31,0,"useLeads"],[12,18,31,0],[12,21,31,0,"useLeads"],[12,29,31,0],[13,2,1,0],[13,6,1,0,"_react"],[13,12,1,0],[13,15,1,0,"require"],[13,22,1,0],[13,23,1,0,"_dependencyMap"],[13,37,1,0],[14,2,2,0],[14,6,2,0,"_expoConstants"],[14,20,2,0],[14,23,2,0,"require"],[14,30,2,0],[14,31,2,0,"_dependencyMap"],[14,45,2,0],[15,2,2,0],[15,6,2,0,"Constants"],[15,15,2,0],[15,18,2,0,"_interopDefault"],[15,33,2,0],[15,34,2,0,"_expoConstants"],[15,48,2,0],[16,2,3,0],[16,6,3,0,"_contextsAuthContext"],[16,26,3,0],[16,29,3,0,"require"],[16,36,3,0],[16,37,3,0,"_dependencyMap"],[16,51,3,0],[17,2,31,7],[17,11,31,16,"useLeads"],[17,19,31,24,"useLeads"],[17,20,31,24],[17,22,31,27],[18,4,32,2],[18,10,32,8],[18,11,32,9,"leads"],[18,16,32,14],[18,18,32,16,"setLeads"],[18,26,32,24],[18,27,32,25],[18,30,32,28],[18,34,32,28,"useState"],[18,40,32,36],[18,41,32,36,"useState"],[18,49,32,36],[18,51,32,45],[18,53,32,47],[18,54,32,48],[19,4,33,2],[19,10,33,8],[19,11,33,9,"loading"],[19,18,33,16],[19,20,33,18,"setLoading"],[19,30,33,28],[19,31,33,29],[19,34,33,32],[19,38,33,32,"useState"],[19,44,33,40],[19,45,33,40,"useState"],[19,53,33,40],[19,55,33,41],[19,60,33,46],[19,61,33,47],[20,4,34,2],[20,10,34,8],[20,11,34,9,"error"],[20,16,34,14],[20,18,34,16,"setError"],[20,26,34,24],[20,27,34,25],[20,30,34,28],[20,34,34,28,"useState"],[20,40,34,36],[20,41,34,36,"useState"],[20,49,34,36],[20,51,34,52],[20,55,34,56],[20,56,34,57],[21,4,35,2],[21,10,35,8],[22,6,35,10,"token"],[23,4,35,16],[23,5,35,17],[23,8,35,20],[23,12,35,20,"useAuth"],[23,32,35,27],[23,33,35,27,"useAuth"],[23,40,35,27],[23,42,35,28],[23,43,35,29],[24,4,37,2],[24,10,37,8,"API_BASE_URL"],[24,22,37,20],[24,25,37,23,"Constants"],[24,34,37,32],[24,35,37,32,"default"],[24,42,37,32],[24,43,37,33,"expoConfig"],[24,53,37,43],[24,55,37,45,"extra"],[24,60,37,50],[24,62,37,52,"EXPO_PUBLIC_BACKEND_URL"],[24,85,37,75],[24,89,37,79,"process"],[24,96,37,86],[24,97,37,87,"env"],[24,100,37,90],[24,101,37,91,"EXPO_PUBLIC_BACKEND_URL"],[24,124,37,114],[25,4,39,2],[25,10,39,8,"fetchLeads"],[25,20,39,18],[25,23,39,21],[25,29,39,21,"fetchLeads"],[25,30,39,21],[25,35,39,33],[26,6,40,4],[26,10,40,8],[26,11,40,9,"token"],[26,16,40,14],[26,18,40,16],[27,6,42,4,"setLoading"],[27,16,42,14],[27,17,42,15],[27,21,42,19],[27,22,42,20],[28,6,43,4,"setError"],[28,14,43,12],[28,15,43,13],[28,19,43,17],[28,20,43,18],[29,6,45,4],[29,10,45,8],[30,8,46,6],[30,14,46,12,"response"],[30,22,46,20],[30,25,46,23],[30,31,46,29,"fetch"],[30,36,46,34],[30,37,46,35],[30,40,46,38,"API_BASE_URL"],[30,52,46,50],[30,64,46,62],[30,66,46,64],[31,10,47,8,"headers"],[31,17,47,15],[31,19,47,17],[32,12,48,10],[32,27,48,25],[32,29,48,27],[32,39,48,37,"token"],[32,44,48,42],[32,46,48,44],[33,12,49,10],[33,26,49,24],[33,28,49,26],[34,10,50,8],[35,8,51,6],[35,9,51,7],[35,10,51,8],[36,8,53,6],[36,12,53,10,"response"],[36,20,53,18],[36,21,53,19,"ok"],[36,23,53,21],[36,25,53,23],[37,10,54,8],[37,16,54,14,"data"],[37,20,54,18],[37,23,54,21],[37,29,54,27,"response"],[37,37,54,35],[37,38,54,36,"json"],[37,42,54,40],[37,43,54,41],[37,44,54,42],[38,10,55,8,"setLeads"],[38,18,55,16],[38,19,55,17,"data"],[38,23,55,21],[38,24,55,22],[39,8,56,6],[39,9,56,7],[39,15,56,13],[40,10,57,8],[40,16,57,14],[40,20,57,18,"Error"],[40,25,57,23],[40,26,57,24],[40,49,57,47],[40,50,57,48],[41,8,58,6],[42,6,59,4],[42,7,59,5],[42,8,59,6],[42,15,59,13,"err"],[42,18,59,21],[42,20,59,23],[43,8,60,6,"setError"],[43,16,60,14],[43,17,60,15,"err"],[43,20,60,18],[43,21,60,19,"message"],[43,28,60,26],[43,29,60,27],[44,8,61,6,"console"],[44,15,61,13],[44,16,61,14,"error"],[44,21,61,19],[44,22,61,20],[44,45,61,43],[44,47,61,45,"err"],[44,50,61,48],[44,51,61,49],[45,6,62,4],[45,7,62,5],[45,16,62,14],[46,8,63,6,"setLoading"],[46,18,63,16],[46,19,63,17],[46,24,63,22],[46,25,63,23],[47,6,64,4],[48,4,65,2],[48,5,65,3],[49,4,67,2],[49,10,67,8,"createLead"],[49,20,67,18],[49,23,67,21],[49,29,67,28,"leadData"],[49,37,67,52],[49,41,67,79],[50,6,68,4],[50,10,68,8],[50,11,68,9,"token"],[50,16,68,14],[50,18,68,16],[50,25,68,23],[50,29,68,27],[51,6,70,4,"setError"],[51,14,70,12],[51,15,70,13],[51,19,70,17],[51,20,70,18],[52,6,72,4],[52,10,72,8],[53,8,73,6],[53,14,73,12,"response"],[53,22,73,20],[53,25,73,23],[53,31,73,29,"fetch"],[53,36,73,34],[53,37,73,35],[53,40,73,38,"API_BASE_URL"],[53,52,73,50],[53,64,73,62],[53,66,73,64],[54,10,74,8,"method"],[54,16,74,14],[54,18,74,16],[54,24,74,22],[55,10,75,8,"headers"],[55,17,75,15],[55,19,75,17],[56,12,76,10],[56,27,76,25],[56,29,76,27],[56,39,76,37,"token"],[56,44,76,42],[56,46,76,44],[57,12,77,10],[57,26,77,24],[57,28,77,26],[58,10,78,8],[58,11,78,9],[59,10,79,8,"body"],[59,14,79,12],[59,16,79,14,"JSON"],[59,20,79,18],[59,21,79,19,"stringify"],[59,30,79,28],[59,31,79,29,"leadData"],[59,39,79,37],[60,8,80,6],[60,9,80,7],[60,10,80,8],[61,8,82,6],[61,12,82,10,"response"],[61,20,82,18],[61,21,82,19,"ok"],[61,23,82,21],[61,25,82,23],[62,10,83,8],[62,16,83,14,"newLead"],[62,23,83,21],[62,26,83,24],[62,32,83,30,"response"],[62,40,83,38],[62,41,83,39,"json"],[62,45,83,43],[62,46,83,44],[62,47,83,45],[63,10,84,8,"setLeads"],[63,18,84,16],[63,19,84,17,"prev"],[63,23,84,21],[63,27,84,25],[63,28,84,26],[63,31,84,29,"prev"],[63,35,84,33],[63,37,84,35,"newLead"],[63,44,84,42],[63,45,84,43],[63,46,84,44],[64,10,85,8],[64,17,85,15,"newLead"],[64,24,85,22],[65,8,86,6],[65,9,86,7],[65,15,86,13],[66,10,87,8],[66,16,87,14,"errorData"],[66,25,87,23],[66,28,87,26],[66,34,87,32,"response"],[66,42,87,40],[66,43,87,41,"json"],[66,47,87,45],[66,48,87,46],[66,49,87,47],[67,10,88,8],[67,16,88,14],[67,20,88,18,"Error"],[67,25,88,23],[67,26,88,24,"errorData"],[67,35,88,33],[67,36,88,34,"detail"],[67,42,88,40],[67,46,88,44],[67,69,88,67],[67,70,88,68],[68,8,89,6],[69,6,90,4],[69,7,90,5],[69,8,90,6],[69,15,90,13,"err"],[69,18,90,21],[69,20,90,23],[70,8,91,6,"setError"],[70,16,91,14],[70,17,91,15,"err"],[70,20,91,18],[70,21,91,19,"message"],[70,28,91,26],[70,29,91,27],[71,8,92,6,"console"],[71,15,92,13],[71,16,92,14,"error"],[71,21,92,19],[71,22,92,20],[71,44,92,42],[71,46,92,44,"err"],[71,49,92,47],[71,50,92,48],[72,8,93,6],[72,15,93,13],[72,19,93,17],[73,6,94,4],[74,4,95,2],[74,5,95,3],[75,4,97,2],[75,10,97,8,"updateLeadStage"],[75,25,97,23],[75,28,97,26],[75,34,97,26,"updateLeadStage"],[75,35,97,33,"leadId"],[75,41,97,47],[75,43,97,49,"stage"],[75,48,97,62],[75,53,97,85],[76,6,98,4],[76,10,98,8],[76,11,98,9,"token"],[76,16,98,14],[76,18,98,16],[76,25,98,23],[76,30,98,28],[77,6,100,4,"setError"],[77,14,100,12],[77,15,100,13],[77,19,100,17],[77,20,100,18],[78,6,102,4],[78,10,102,8],[79,8,103,6],[79,14,103,12,"response"],[79,22,103,20],[79,25,103,23],[79,31,103,29,"fetch"],[79,36,103,34],[79,37,103,35],[79,40,103,38,"API_BASE_URL"],[79,52,103,50],[79,66,103,64,"leadId"],[79,72,103,70],[79,88,103,86,"encodeURIComponent"],[79,106,103,104],[79,107,103,105,"stage"],[79,112,103,110],[79,113,103,111],[79,115,103,113],[79,117,103,115],[80,10,104,8,"method"],[80,16,104,14],[80,18,104,16],[80,25,104,23],[81,10,105,8,"headers"],[81,17,105,15],[81,19,105,17],[82,12,106,10],[82,27,106,25],[82,29,106,27],[82,39,106,37,"token"],[82,44,106,42],[82,46,106,44],[83,12,107,10],[83,26,107,24],[83,28,107,26],[84,10,108,8],[85,8,109,6],[85,9,109,7],[85,10,109,8],[86,8,111,6],[86,12,111,10,"response"],[86,20,111,18],[86,21,111,19,"ok"],[86,23,111,21],[86,25,111,23],[87,10,112,8],[88,10,113,8,"setLeads"],[88,18,113,16],[88,19,113,17,"prev"],[88,23,113,21],[88,27,114,10,"prev"],[88,31,114,14],[88,32,114,15,"map"],[88,35,114,18],[88,36,114,19,"lead"],[88,40,114,23],[88,44,115,12,"lead"],[88,48,115,16],[88,49,115,17,"id"],[88,51,115,19],[88,56,115,24,"leadId"],[88,62,115,30],[88,65,116,16],[89,12,116,18],[89,15,116,21,"lead"],[89,19,116,25],[90,12,116,27,"stage"],[90,17,116,32],[91,12,116,34,"last_interaction"],[91,28,116,50],[91,30,116,52],[91,34,116,56,"Date"],[91,38,116,60],[91,39,116,61],[91,40,116,62],[91,41,116,63,"toISOString"],[91,52,116,74],[91,53,116,75],[92,10,116,77],[92,11,116,78],[92,14,117,16,"lead"],[92,18,118,10],[92,19,119,8],[92,20,119,9],[93,10,120,8],[93,17,120,15],[93,21,120,19],[94,8,121,6],[94,9,121,7],[94,15,121,13],[95,10,122,8],[95,16,122,14],[95,20,122,18,"Error"],[95,25,122,23],[95,26,122,24],[95,55,122,53],[95,56,122,54],[96,8,123,6],[97,6,124,4],[97,7,124,5],[97,8,124,6],[97,15,124,13,"err"],[97,18,124,21],[97,20,124,23],[98,8,125,6,"setError"],[98,16,125,14],[98,17,125,15,"err"],[98,20,125,18],[98,21,125,19,"message"],[98,28,125,26],[98,29,125,27],[99,8,126,6,"console"],[99,15,126,13],[99,16,126,14,"error"],[99,21,126,19],[99,22,126,20],[99,50,126,48],[99,52,126,50,"err"],[99,55,126,53],[99,56,126,54],[100,8,127,6],[100,15,127,13],[100,20,127,18],[101,6,128,4],[102,4,129,2],[102,5,129,3],[103,4,131,2],[103,10,131,8,"deleteLead"],[103,20,131,18],[103,23,131,21],[103,29,131,28,"leadId"],[103,35,131,42],[103,39,131,65],[104,6,132,4],[104,10,132,8],[104,11,132,9,"token"],[104,16,132,14],[104,18,132,16],[104,25,132,23],[104,30,132,28],[105,6,134,4,"setError"],[105,14,134,12],[105,15,134,13],[105,19,134,17],[105,20,134,18],[106,6,136,4],[106,10,136,8],[107,8,137,6],[107,14,137,12,"response"],[107,22,137,20],[107,25,137,23],[107,31,137,29,"fetch"],[107,36,137,34],[107,37,137,35],[107,40,137,38,"API_BASE_URL"],[107,52,137,50],[107,66,137,64,"leadId"],[107,72,137,70],[107,74,137,72],[107,76,137,74],[108,10,138,8,"method"],[108,16,138,14],[108,18,138,16],[108,26,138,24],[109,10,139,8,"headers"],[109,17,139,15],[109,19,139,17],[110,12,140,10],[110,27,140,25],[110,29,140,27],[110,39,140,37,"token"],[110,44,140,42],[110,46,140,44],[111,12,141,10],[111,26,141,24],[111,28,141,26],[112,10,142,8],[113,8,143,6],[113,9,143,7],[113,10,143,8],[114,8,145,6],[114,12,145,10,"response"],[114,20,145,18],[114,21,145,19,"ok"],[114,23,145,21],[114,25,145,23],[115,10,146,8,"setLeads"],[115,18,146,16],[115,19,146,17,"prev"],[115,23,146,21],[115,27,146,25,"prev"],[115,31,146,29],[115,32,146,30,"filter"],[115,38,146,36],[115,39,146,37,"lead"],[115,43,146,41],[115,47,146,45,"lead"],[115,51,146,49],[115,52,146,50,"id"],[115,54,146,52],[115,59,146,57,"leadId"],[115,65,146,63],[115,66,146,64],[115,67,146,65],[116,10,147,8],[116,17,147,15],[116,21,147,19],[117,8,148,6],[117,9,148,7],[117,15,148,13],[118,10,149,8],[118,16,149,14],[118,20,149,18,"Error"],[118,25,149,23],[118,26,149,24],[118,49,149,47],[118,50,149,48],[119,8,150,6],[120,6,151,4],[120,7,151,5],[120,8,151,6],[120,15,151,13,"err"],[120,18,151,21],[120,20,151,23],[121,8,152,6,"setError"],[121,16,152,14],[121,17,152,15,"err"],[121,20,152,18],[121,21,152,19,"message"],[121,28,152,26],[121,29,152,27],[122,8,153,6,"console"],[122,15,153,13],[122,16,153,14,"error"],[122,21,153,19],[122,22,153,20],[122,44,153,42],[122,46,153,44,"err"],[122,49,153,47],[122,50,153,48],[123,8,154,6],[123,15,154,13],[123,20,154,18],[124,6,155,4],[125,4,156,2],[125,5,156,3],[126,4,158,2],[126,8,158,2,"useEffect"],[126,14,158,11],[126,15,158,11,"useEffect"],[126,24,158,11],[126,26,158,12],[126,32,158,18],[127,6,159,4,"fetchLeads"],[127,16,159,14],[127,17,159,15],[127,18,159,16],[128,4,160,2],[128,5,160,3],[128,7,160,5],[128,8,160,6,"token"],[128,13,160,11],[128,14,160,12],[128,15,160,13],[129,4,162,2],[129,11,162,9],[130,6,163,4,"leads"],[130,11,163,9],[131,6,164,4,"loading"],[131,13,164,11],[132,6,165,4,"error"],[132,11,165,9],[133,6,166,4,"fetchLeads"],[133,16,166,14],[134,6,167,4,"createLead"],[134,16,167,14],[135,6,168,4,"updateLeadStage"],[135,21,168,19],[136,6,169,4,"deleteLead"],[137,4,170,2],[137,5,170,3],[138,2,171,0],[139,0,171,1],[139,3]],"functionMap":{"names":["<global>","useLeads","fetchLeads","createLead","setLeads$argument_0","updateLeadStage","prev.map$argument_0","deleteLead","prev.filter$argument_0","useEffect$argument_0"],"mappings":"AAA;OC8B;qBCQ;GD0B;qBEE;iBCiB,0BD;GFW;0BIE;iBDgB;mBEC;oBFG;WCC;GJW;qBME;iBHe,oBI,0BJ,CG;GNU;YQE;GRE;CDW"},"hasCjsExports":false},"type":"js/module"}]}