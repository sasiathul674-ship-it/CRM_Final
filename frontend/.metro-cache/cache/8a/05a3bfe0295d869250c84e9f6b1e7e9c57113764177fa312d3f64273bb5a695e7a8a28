{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":39,"index":129}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoConstants = require(_dependencyMap[1], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(false);\n    const API_BASE_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || process.env.EXPO_PUBLIC_BACKEND_URL;\n    const fetchUser = async authToken => {\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/auth/me`, {\n          headers: {\n            'Authorization': `Bearer ${authToken}`,\n            'Content-Type': 'application/json'\n          }\n        });\n        if (response.ok) {\n          const userData = await response.json();\n          setUser(userData);\n        } else {\n          throw new Error('Failed to fetch user');\n        }\n      } catch (error) {\n        console.error('Error fetching user:', error);\n        logout();\n      }\n    };\n    const login = async (email, password) => {\n      setIsLoading(true);\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/auth/login`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email,\n            password\n          })\n        });\n        const data = await response.json();\n        if (response.ok) {\n          const {\n            access_token\n          } = data;\n          setToken(access_token);\n          await fetchUser(access_token);\n        } else {\n          throw new Error(data.detail || 'Login failed');\n        }\n      } catch (error) {\n        console.error('Login error:', error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const register = async (email, password, name, company) => {\n      setIsLoading(true);\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/auth/register`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email,\n            password,\n            name,\n            company\n          })\n        });\n        const data = await response.json();\n        if (response.ok) {\n          const {\n            access_token\n          } = data;\n          setToken(access_token);\n          await fetchUser(access_token);\n        } else {\n          throw new Error(data.detail || 'Registration failed');\n        }\n      } catch (error) {\n        console.error('Registration error:', error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const logout = () => {\n      setToken(null);\n      setUser(null);\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        login,\n        register,\n        logout,\n        isLoading,\n        isAuthenticated: !!user && !!token\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":136,"map":[[13,2,27,0,"exports"],[13,9,27,0],[13,10,27,0,"AuthProvider"],[13,22,27,0],[13,25,27,0,"AuthProvider"],[13,37,27,0],[14,2,133,0,"exports"],[14,9,133,0],[14,10,133,0,"useAuth"],[14,17,133,0],[14,20,133,0,"useAuth"],[14,27,133,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_expoConstants"],[16,20,2,0],[16,23,2,0,"require"],[16,30,2,0],[16,31,2,0,"_dependencyMap"],[16,45,2,0],[17,2,2,0],[17,6,2,0,"Constants"],[17,15,2,0],[17,18,2,0,"_interopDefault"],[17,33,2,0],[17,34,2,0,"_expoConstants"],[17,48,2,0],[18,2,2,39],[18,6,2,39,"_reactJsxDevRuntime"],[18,25,2,39],[18,28,2,39,"require"],[18,35,2,39],[18,36,2,39,"_dependencyMap"],[18,50,2,39],[19,2,21,0],[19,8,21,6,"AuthContext"],[19,19,21,17],[19,35,21,20],[19,39,21,20,"createContext"],[19,45,21,33],[19,46,21,33,"createContext"],[19,59,21,33],[19,61,21,63,"undefined"],[19,70,21,72],[19,71,21,73],[20,2,27,7],[20,11,27,16,"AuthProvider"],[20,23,27,28,"AuthProvider"],[20,24,27,29],[21,4,27,31,"children"],[22,2,27,59],[22,3,27,60],[22,5,27,62],[23,4,28,2],[23,10,28,8],[23,11,28,9,"user"],[23,15,28,13],[23,17,28,15,"setUser"],[23,24,28,22],[23,25,28,23],[23,28,28,26],[23,32,28,26,"useState"],[23,38,28,34],[23,39,28,34,"useState"],[23,47,28,34],[23,49,28,48],[23,53,28,52],[23,54,28,53],[24,4,29,2],[24,10,29,8],[24,11,29,9,"token"],[24,16,29,14],[24,18,29,16,"setToken"],[24,26,29,24],[24,27,29,25],[24,30,29,28],[24,34,29,28,"useState"],[24,40,29,36],[24,41,29,36,"useState"],[24,49,29,36],[24,51,29,52],[24,55,29,56],[24,56,29,57],[25,4,30,2],[25,10,30,8],[25,11,30,9,"isLoading"],[25,20,30,18],[25,22,30,20,"setIsLoading"],[25,34,30,32],[25,35,30,33],[25,38,30,36],[25,42,30,36,"useState"],[25,48,30,44],[25,49,30,44,"useState"],[25,57,30,44],[25,59,30,45],[25,64,30,50],[25,65,30,51],[26,4,32,2],[26,10,32,8,"API_BASE_URL"],[26,22,32,20],[26,25,32,23,"Constants"],[26,34,32,32],[26,35,32,32,"default"],[26,42,32,32],[26,43,32,33,"expoConfig"],[26,53,32,43],[26,55,32,45,"extra"],[26,60,32,50],[26,62,32,52,"EXPO_PUBLIC_BACKEND_URL"],[26,85,32,75],[26,89,32,79,"process"],[26,96,32,86],[26,97,32,87,"env"],[26,100,32,90],[26,101,32,91,"EXPO_PUBLIC_BACKEND_URL"],[26,124,32,114],[27,4,34,2],[27,10,34,8,"fetchUser"],[27,19,34,17],[27,22,34,20],[27,28,34,27,"authToken"],[27,37,34,44],[27,41,34,49],[28,6,35,4],[28,10,35,8],[29,8,36,6],[29,14,36,12,"response"],[29,22,36,20],[29,25,36,23],[29,31,36,29,"fetch"],[29,36,36,34],[29,37,36,35],[29,40,36,38,"API_BASE_URL"],[29,52,36,50],[29,66,36,64],[29,68,36,66],[30,10,37,8,"headers"],[30,17,37,15],[30,19,37,17],[31,12,38,10],[31,27,38,25],[31,29,38,27],[31,39,38,37,"authToken"],[31,48,38,46],[31,50,38,48],[32,12,39,10],[32,26,39,24],[32,28,39,26],[33,10,40,8],[34,8,41,6],[34,9,41,7],[34,10,41,8],[35,8,43,6],[35,12,43,10,"response"],[35,20,43,18],[35,21,43,19,"ok"],[35,23,43,21],[35,25,43,23],[36,10,44,8],[36,16,44,14,"userData"],[36,24,44,22],[36,27,44,25],[36,33,44,31,"response"],[36,41,44,39],[36,42,44,40,"json"],[36,46,44,44],[36,47,44,45],[36,48,44,46],[37,10,45,8,"setUser"],[37,17,45,15],[37,18,45,16,"userData"],[37,26,45,24],[37,27,45,25],[38,8,46,6],[38,9,46,7],[38,15,46,13],[39,10,47,8],[39,16,47,14],[39,20,47,18,"Error"],[39,25,47,23],[39,26,47,24],[39,48,47,46],[39,49,47,47],[40,8,48,6],[41,6,49,4],[41,7,49,5],[41,8,49,6],[41,15,49,13,"error"],[41,20,49,18],[41,22,49,20],[42,8,50,6,"console"],[42,15,50,13],[42,16,50,14,"error"],[42,21,50,19],[42,22,50,20],[42,44,50,42],[42,46,50,44,"error"],[42,51,50,49],[42,52,50,50],[43,8,51,6,"logout"],[43,14,51,12],[43,15,51,13],[43,16,51,14],[44,6,52,4],[45,4,53,2],[45,5,53,3],[46,4,55,2],[46,10,55,8,"login"],[46,15,55,13],[46,18,55,16],[46,24,55,16,"login"],[46,25,55,23,"email"],[46,30,55,36],[46,32,55,38,"password"],[46,40,55,54],[46,45,55,59],[47,6,56,4,"setIsLoading"],[47,18,56,16],[47,19,56,17],[47,23,56,21],[47,24,56,22],[48,6,57,4],[48,10,57,8],[49,8,58,6],[49,14,58,12,"response"],[49,22,58,20],[49,25,58,23],[49,31,58,29,"fetch"],[49,36,58,34],[49,37,58,35],[49,40,58,38,"API_BASE_URL"],[49,52,58,50],[49,69,58,67],[49,71,58,69],[50,10,59,8,"method"],[50,16,59,14],[50,18,59,16],[50,24,59,22],[51,10,60,8,"headers"],[51,17,60,15],[51,19,60,17],[52,12,61,10],[52,26,61,24],[52,28,61,26],[53,10,62,8],[53,11,62,9],[54,10,63,8,"body"],[54,14,63,12],[54,16,63,14,"JSON"],[54,20,63,18],[54,21,63,19,"stringify"],[54,30,63,28],[54,31,63,29],[55,12,63,31,"email"],[55,17,63,36],[56,12,63,38,"password"],[57,10,63,47],[57,11,63,48],[58,8,64,6],[58,9,64,7],[58,10,64,8],[59,8,66,6],[59,14,66,12,"data"],[59,18,66,16],[59,21,66,19],[59,27,66,25,"response"],[59,35,66,33],[59,36,66,34,"json"],[59,40,66,38],[59,41,66,39],[59,42,66,40],[60,8,68,6],[60,12,68,10,"response"],[60,20,68,18],[60,21,68,19,"ok"],[60,23,68,21],[60,25,68,23],[61,10,69,8],[61,16,69,14],[62,12,69,16,"access_token"],[63,10,69,29],[63,11,69,30],[63,14,69,33,"data"],[63,18,69,37],[64,10,70,8,"setToken"],[64,18,70,16],[64,19,70,17,"access_token"],[64,31,70,29],[64,32,70,30],[65,10,71,8],[65,16,71,14,"fetchUser"],[65,25,71,23],[65,26,71,24,"access_token"],[65,38,71,36],[65,39,71,37],[66,8,72,6],[66,9,72,7],[66,15,72,13],[67,10,73,8],[67,16,73,14],[67,20,73,18,"Error"],[67,25,73,23],[67,26,73,24,"data"],[67,30,73,28],[67,31,73,29,"detail"],[67,37,73,35],[67,41,73,39],[67,55,73,53],[67,56,73,54],[68,8,74,6],[69,6,75,4],[69,7,75,5],[69,8,75,6],[69,15,75,13,"error"],[69,20,75,18],[69,22,75,20],[70,8,76,6,"console"],[70,15,76,13],[70,16,76,14,"error"],[70,21,76,19],[70,22,76,20],[70,36,76,34],[70,38,76,36,"error"],[70,43,76,41],[70,44,76,42],[71,8,77,6],[71,14,77,12,"error"],[71,19,77,17],[72,6,78,4],[72,7,78,5],[72,16,78,14],[73,8,79,6,"setIsLoading"],[73,20,79,18],[73,21,79,19],[73,26,79,24],[73,27,79,25],[74,6,80,4],[75,4,81,2],[75,5,81,3],[76,4,83,2],[76,10,83,8,"register"],[76,18,83,16],[76,21,83,19],[76,27,83,19,"register"],[76,28,83,26,"email"],[76,33,83,39],[76,35,83,41,"password"],[76,43,83,57],[76,45,83,59,"name"],[76,49,83,71],[76,51,83,73,"company"],[76,58,83,89],[76,63,83,94],[77,6,84,4,"setIsLoading"],[77,18,84,16],[77,19,84,17],[77,23,84,21],[77,24,84,22],[78,6,85,4],[78,10,85,8],[79,8,86,6],[79,14,86,12,"response"],[79,22,86,20],[79,25,86,23],[79,31,86,29,"fetch"],[79,36,86,34],[79,37,86,35],[79,40,86,38,"API_BASE_URL"],[79,52,86,50],[79,72,86,70],[79,74,86,72],[80,10,87,8,"method"],[80,16,87,14],[80,18,87,16],[80,24,87,22],[81,10,88,8,"headers"],[81,17,88,15],[81,19,88,17],[82,12,89,10],[82,26,89,24],[82,28,89,26],[83,10,90,8],[83,11,90,9],[84,10,91,8,"body"],[84,14,91,12],[84,16,91,14,"JSON"],[84,20,91,18],[84,21,91,19,"stringify"],[84,30,91,28],[84,31,91,29],[85,12,91,31,"email"],[85,17,91,36],[86,12,91,38,"password"],[86,20,91,46],[87,12,91,48,"name"],[87,16,91,52],[88,12,91,54,"company"],[89,10,91,62],[89,11,91,63],[90,8,92,6],[90,9,92,7],[90,10,92,8],[91,8,94,6],[91,14,94,12,"data"],[91,18,94,16],[91,21,94,19],[91,27,94,25,"response"],[91,35,94,33],[91,36,94,34,"json"],[91,40,94,38],[91,41,94,39],[91,42,94,40],[92,8,96,6],[92,12,96,10,"response"],[92,20,96,18],[92,21,96,19,"ok"],[92,23,96,21],[92,25,96,23],[93,10,97,8],[93,16,97,14],[94,12,97,16,"access_token"],[95,10,97,29],[95,11,97,30],[95,14,97,33,"data"],[95,18,97,37],[96,10,98,8,"setToken"],[96,18,98,16],[96,19,98,17,"access_token"],[96,31,98,29],[96,32,98,30],[97,10,99,8],[97,16,99,14,"fetchUser"],[97,25,99,23],[97,26,99,24,"access_token"],[97,38,99,36],[97,39,99,37],[98,8,100,6],[98,9,100,7],[98,15,100,13],[99,10,101,8],[99,16,101,14],[99,20,101,18,"Error"],[99,25,101,23],[99,26,101,24,"data"],[99,30,101,28],[99,31,101,29,"detail"],[99,37,101,35],[99,41,101,39],[99,62,101,60],[99,63,101,61],[100,8,102,6],[101,6,103,4],[101,7,103,5],[101,8,103,6],[101,15,103,13,"error"],[101,20,103,18],[101,22,103,20],[102,8,104,6,"console"],[102,15,104,13],[102,16,104,14,"error"],[102,21,104,19],[102,22,104,20],[102,43,104,41],[102,45,104,43,"error"],[102,50,104,48],[102,51,104,49],[103,8,105,6],[103,14,105,12,"error"],[103,19,105,17],[104,6,106,4],[104,7,106,5],[104,16,106,14],[105,8,107,6,"setIsLoading"],[105,20,107,18],[105,21,107,19],[105,26,107,24],[105,27,107,25],[106,6,108,4],[107,4,109,2],[107,5,109,3],[108,4,111,2],[108,10,111,8,"logout"],[108,16,111,14],[108,19,111,17,"logout"],[108,20,111,17],[108,25,111,23],[109,6,112,4,"setToken"],[109,14,112,12],[109,15,112,13],[109,19,112,17],[109,20,112,18],[110,6,113,4,"setUser"],[110,13,113,11],[110,14,113,12],[110,18,113,16],[110,19,113,17],[111,4,114,2],[111,5,114,3],[112,4,116,2],[112,24,117,4],[112,28,117,4,"_reactJsxDevRuntime"],[112,47,117,4],[112,48,117,4,"jsxDEV"],[112,54,117,4],[112,56,117,5,"AuthContext"],[112,67,117,16],[112,68,117,17,"Provider"],[112,76,117,25],[113,6,118,6,"value"],[113,11,118,11],[113,13,118,13],[114,8,119,8,"user"],[114,12,119,12],[115,8,120,8,"token"],[115,13,120,13],[116,8,121,8,"login"],[116,13,121,13],[117,8,122,8,"register"],[117,16,122,16],[118,8,123,8,"logout"],[118,14,123,14],[119,8,124,8,"isLoading"],[119,17,124,17],[120,8,125,8,"isAuthenticated"],[120,23,125,23],[120,25,125,25],[120,26,125,26],[120,27,125,27,"user"],[120,31,125,31],[120,35,125,35],[120,36,125,36],[120,37,125,37,"token"],[121,6,126,6],[121,7,126,8],[122,6,126,8,"children"],[122,14,126,8],[122,16,128,7,"children"],[123,4,128,15],[124,6,128,15,"fileName"],[124,14,128,15],[124,16,128,15,"_jsxFileName"],[124,28,128,15],[125,6,128,15,"lineNumber"],[125,16,128,15],[126,6,128,15,"columnNumber"],[126,18,128,15],[127,4,128,15],[127,11,129,26],[127,12,129,27],[128,2,131,0],[129,2,133,7],[129,11,133,16,"useAuth"],[129,18,133,23,"useAuth"],[129,19,133,23],[129,21,133,26],[130,4,134,2],[130,10,134,8,"context"],[130,17,134,15],[130,20,134,18],[130,24,134,18,"useContext"],[130,30,134,28],[130,31,134,28,"useContext"],[130,41,134,28],[130,43,134,29,"AuthContext"],[130,54,134,40],[130,55,134,41],[131,4,135,2],[131,8,135,6,"context"],[131,15,135,13],[131,20,135,18,"undefined"],[131,29,135,27],[131,31,135,29],[132,6,136,4],[132,12,136,10],[132,16,136,14,"Error"],[132,21,136,19],[132,22,136,20],[132,67,136,65],[132,68,136,66],[133,4,137,2],[134,4,138,2],[134,11,138,9,"context"],[134,18,138,16],[135,2,139,0],[136,0,139,1],[136,3]],"functionMap":{"names":["<global>","AuthProvider","fetchUser","login","register","logout","useAuth"],"mappings":"AAA;OC0B;oBCO;GDmB;gBEE;GF0B;mBGE;GH0B;iBIE;GJG;CDiB;OME;CNM"},"hasCjsExports":false},"type":"js/module"}]}