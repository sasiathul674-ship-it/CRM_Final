{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":2,"column":39,"index":84}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"../contexts/AuthContext","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":85},"end":{"line":3,"column":50,"index":135}}],"key":"oNCgyH4yx4pAIVZXLqqRGB2kuCY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.useLeads = useLeads;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _expoConstants = require(_dependencyMap[2], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _contextsAuthContext = require(_dependencyMap[3], \"../contexts/AuthContext\");\n  function useLeads() {\n    _s();\n    const [leads, setLeads] = (0, _react.useState)([]);\n    const [loading, setLoading] = (0, _react.useState)(false);\n    const [error, setError] = (0, _react.useState)(null);\n    const {\n      token\n    } = (0, _contextsAuthContext.useAuth)();\n    const API_BASE_URL = Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL || _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n    const fetchLeads = async () => {\n      if (!token) return;\n      setLoading(true);\n      setError(null);\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/leads`, {\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        });\n        if (response.ok) {\n          const data = await response.json();\n          setLeads(data);\n        } else {\n          throw new Error('Failed to fetch leads');\n        }\n      } catch (err) {\n        setError(err.message);\n        console.error('Error fetching leads:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const createLead = async leadData => {\n      if (!token) return null;\n      setError(null);\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/leads`, {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(leadData)\n        });\n        if (response.ok) {\n          const newLead = await response.json();\n          setLeads(prev => [...prev, newLead]);\n          return newLead;\n        } else {\n          const errorData = await response.json();\n          throw new Error(errorData.detail || 'Failed to create lead');\n        }\n      } catch (err) {\n        setError(err.message);\n        console.error('Error creating lead:', err);\n        return null;\n      }\n    };\n    const updateLeadStage = async (leadId, stage) => {\n      if (!token) return false;\n      setError(null);\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/leads/${leadId}/stage?stage=${encodeURIComponent(stage)}`, {\n          method: 'PATCH',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        });\n        if (response.ok) {\n          // Update local state\n          setLeads(prev => prev.map(lead => lead.id === leadId ? Object.assign({}, lead, {\n            stage,\n            last_interaction: new Date().toISOString()\n          }) : lead));\n          return true;\n        } else {\n          throw new Error('Failed to update lead stage');\n        }\n      } catch (err) {\n        setError(err.message);\n        console.error('Error updating lead stage:', err);\n        return false;\n      }\n    };\n    const deleteLead = async leadId => {\n      if (!token) return false;\n      setError(null);\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/leads/${leadId}`, {\n          method: 'DELETE',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        });\n        if (response.ok) {\n          setLeads(prev => prev.filter(lead => lead.id !== leadId));\n          return true;\n        } else {\n          throw new Error('Failed to delete lead');\n        }\n      } catch (err) {\n        setError(err.message);\n        console.error('Error deleting lead:', err);\n        return false;\n      }\n    };\n    (0, _react.useEffect)(() => {\n      fetchLeads();\n    }, [token]);\n    return {\n      leads,\n      loading,\n      error,\n      fetchLeads,\n      createLead,\n      updateLeadStage,\n      deleteLead\n    };\n  }\n  _s(useLeads, \"u35aeI6znRt8ctmbS9WTy4K+6bk=\", false, function () {\n    return [_contextsAuthContext.useAuth];\n  });\n});","lineCount":144,"map":[[13,2,31,0,"exports"],[13,9,31,0],[13,10,31,0,"useLeads"],[13,18,31,0],[13,21,31,0,"useLeads"],[13,29,31,0],[14,2,171,1],[14,6,171,1,"_expoVirtualEnv"],[14,21,171,1],[14,24,171,1,"require"],[14,31,171,1],[14,32,171,1,"_dependencyMap"],[14,46,171,1],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_expoConstants"],[16,20,2,0],[16,23,2,0,"require"],[16,30,2,0],[16,31,2,0,"_dependencyMap"],[16,45,2,0],[17,2,2,0],[17,6,2,0,"Constants"],[17,15,2,0],[17,18,2,0,"_interopDefault"],[17,33,2,0],[17,34,2,0,"_expoConstants"],[17,48,2,0],[18,2,3,0],[18,6,3,0,"_contextsAuthContext"],[18,26,3,0],[18,29,3,0,"require"],[18,36,3,0],[18,37,3,0,"_dependencyMap"],[18,51,3,0],[19,2,31,7],[19,11,31,16,"useLeads"],[19,19,31,24,"useLeads"],[19,20,31,24],[19,22,31,27],[20,4,31,27,"_s"],[20,6,31,27],[21,4,32,2],[21,10,32,8],[21,11,32,9,"leads"],[21,16,32,14],[21,18,32,16,"setLeads"],[21,26,32,24],[21,27,32,25],[21,30,32,28],[21,34,32,28,"useState"],[21,40,32,36],[21,41,32,36,"useState"],[21,49,32,36],[21,51,32,45],[21,53,32,47],[21,54,32,48],[22,4,33,2],[22,10,33,8],[22,11,33,9,"loading"],[22,18,33,16],[22,20,33,18,"setLoading"],[22,30,33,28],[22,31,33,29],[22,34,33,32],[22,38,33,32,"useState"],[22,44,33,40],[22,45,33,40,"useState"],[22,53,33,40],[22,55,33,41],[22,60,33,46],[22,61,33,47],[23,4,34,2],[23,10,34,8],[23,11,34,9,"error"],[23,16,34,14],[23,18,34,16,"setError"],[23,26,34,24],[23,27,34,25],[23,30,34,28],[23,34,34,28,"useState"],[23,40,34,36],[23,41,34,36,"useState"],[23,49,34,36],[23,51,34,52],[23,55,34,56],[23,56,34,57],[24,4,35,2],[24,10,35,8],[25,6,35,10,"token"],[26,4,35,16],[26,5,35,17],[26,8,35,20],[26,12,35,20,"useAuth"],[26,32,35,27],[26,33,35,27,"useAuth"],[26,40,35,27],[26,42,35,28],[26,43,35,29],[27,4,37,2],[27,10,37,8,"API_BASE_URL"],[27,22,37,20],[27,25,37,23,"Constants"],[27,34,37,32],[27,35,37,32,"default"],[27,42,37,32],[27,43,37,33,"expoConfig"],[27,53,37,43],[27,55,37,45,"extra"],[27,60,37,50],[27,62,37,52,"EXPO_PUBLIC_BACKEND_URL"],[27,85,37,75],[27,89,37,75,"_expoVirtualEnv"],[27,104,37,75],[27,105,37,75,"env"],[27,108,37,75],[27,109,37,75,"EXPO_PUBLIC_BACKEND_URL"],[27,132,37,114],[28,4,39,2],[28,10,39,8,"fetchLeads"],[28,20,39,18],[28,23,39,21],[28,29,39,21,"fetchLeads"],[28,30,39,21],[28,35,39,33],[29,6,40,4],[29,10,40,8],[29,11,40,9,"token"],[29,16,40,14],[29,18,40,16],[30,6,42,4,"setLoading"],[30,16,42,14],[30,17,42,15],[30,21,42,19],[30,22,42,20],[31,6,43,4,"setError"],[31,14,43,12],[31,15,43,13],[31,19,43,17],[31,20,43,18],[32,6,45,4],[32,10,45,8],[33,8,46,6],[33,14,46,12,"response"],[33,22,46,20],[33,25,46,23],[33,31,46,29,"fetch"],[33,36,46,34],[33,37,46,35],[33,40,46,38,"API_BASE_URL"],[33,52,46,50],[33,64,46,62],[33,66,46,64],[34,10,47,8,"headers"],[34,17,47,15],[34,19,47,17],[35,12,48,10],[35,27,48,25],[35,29,48,27],[35,39,48,37,"token"],[35,44,48,42],[35,46,48,44],[36,12,49,10],[36,26,49,24],[36,28,49,26],[37,10,50,8],[38,8,51,6],[38,9,51,7],[38,10,51,8],[39,8,53,6],[39,12,53,10,"response"],[39,20,53,18],[39,21,53,19,"ok"],[39,23,53,21],[39,25,53,23],[40,10,54,8],[40,16,54,14,"data"],[40,20,54,18],[40,23,54,21],[40,29,54,27,"response"],[40,37,54,35],[40,38,54,36,"json"],[40,42,54,40],[40,43,54,41],[40,44,54,42],[41,10,55,8,"setLeads"],[41,18,55,16],[41,19,55,17,"data"],[41,23,55,21],[41,24,55,22],[42,8,56,6],[42,9,56,7],[42,15,56,13],[43,10,57,8],[43,16,57,14],[43,20,57,18,"Error"],[43,25,57,23],[43,26,57,24],[43,49,57,47],[43,50,57,48],[44,8,58,6],[45,6,59,4],[45,7,59,5],[45,8,59,6],[45,15,59,13,"err"],[45,18,59,21],[45,20,59,23],[46,8,60,6,"setError"],[46,16,60,14],[46,17,60,15,"err"],[46,20,60,18],[46,21,60,19,"message"],[46,28,60,26],[46,29,60,27],[47,8,61,6,"console"],[47,15,61,13],[47,16,61,14,"error"],[47,21,61,19],[47,22,61,20],[47,45,61,43],[47,47,61,45,"err"],[47,50,61,48],[47,51,61,49],[48,6,62,4],[48,7,62,5],[48,16,62,14],[49,8,63,6,"setLoading"],[49,18,63,16],[49,19,63,17],[49,24,63,22],[49,25,63,23],[50,6,64,4],[51,4,65,2],[51,5,65,3],[52,4,67,2],[52,10,67,8,"createLead"],[52,20,67,18],[52,23,67,21],[52,29,67,28,"leadData"],[52,37,67,52],[52,41,67,79],[53,6,68,4],[53,10,68,8],[53,11,68,9,"token"],[53,16,68,14],[53,18,68,16],[53,25,68,23],[53,29,68,27],[54,6,70,4,"setError"],[54,14,70,12],[54,15,70,13],[54,19,70,17],[54,20,70,18],[55,6,72,4],[55,10,72,8],[56,8,73,6],[56,14,73,12,"response"],[56,22,73,20],[56,25,73,23],[56,31,73,29,"fetch"],[56,36,73,34],[56,37,73,35],[56,40,73,38,"API_BASE_URL"],[56,52,73,50],[56,64,73,62],[56,66,73,64],[57,10,74,8,"method"],[57,16,74,14],[57,18,74,16],[57,24,74,22],[58,10,75,8,"headers"],[58,17,75,15],[58,19,75,17],[59,12,76,10],[59,27,76,25],[59,29,76,27],[59,39,76,37,"token"],[59,44,76,42],[59,46,76,44],[60,12,77,10],[60,26,77,24],[60,28,77,26],[61,10,78,8],[61,11,78,9],[62,10,79,8,"body"],[62,14,79,12],[62,16,79,14,"JSON"],[62,20,79,18],[62,21,79,19,"stringify"],[62,30,79,28],[62,31,79,29,"leadData"],[62,39,79,37],[63,8,80,6],[63,9,80,7],[63,10,80,8],[64,8,82,6],[64,12,82,10,"response"],[64,20,82,18],[64,21,82,19,"ok"],[64,23,82,21],[64,25,82,23],[65,10,83,8],[65,16,83,14,"newLead"],[65,23,83,21],[65,26,83,24],[65,32,83,30,"response"],[65,40,83,38],[65,41,83,39,"json"],[65,45,83,43],[65,46,83,44],[65,47,83,45],[66,10,84,8,"setLeads"],[66,18,84,16],[66,19,84,17,"prev"],[66,23,84,21],[66,27,84,25],[66,28,84,26],[66,31,84,29,"prev"],[66,35,84,33],[66,37,84,35,"newLead"],[66,44,84,42],[66,45,84,43],[66,46,84,44],[67,10,85,8],[67,17,85,15,"newLead"],[67,24,85,22],[68,8,86,6],[68,9,86,7],[68,15,86,13],[69,10,87,8],[69,16,87,14,"errorData"],[69,25,87,23],[69,28,87,26],[69,34,87,32,"response"],[69,42,87,40],[69,43,87,41,"json"],[69,47,87,45],[69,48,87,46],[69,49,87,47],[70,10,88,8],[70,16,88,14],[70,20,88,18,"Error"],[70,25,88,23],[70,26,88,24,"errorData"],[70,35,88,33],[70,36,88,34,"detail"],[70,42,88,40],[70,46,88,44],[70,69,88,67],[70,70,88,68],[71,8,89,6],[72,6,90,4],[72,7,90,5],[72,8,90,6],[72,15,90,13,"err"],[72,18,90,21],[72,20,90,23],[73,8,91,6,"setError"],[73,16,91,14],[73,17,91,15,"err"],[73,20,91,18],[73,21,91,19,"message"],[73,28,91,26],[73,29,91,27],[74,8,92,6,"console"],[74,15,92,13],[74,16,92,14,"error"],[74,21,92,19],[74,22,92,20],[74,44,92,42],[74,46,92,44,"err"],[74,49,92,47],[74,50,92,48],[75,8,93,6],[75,15,93,13],[75,19,93,17],[76,6,94,4],[77,4,95,2],[77,5,95,3],[78,4,97,2],[78,10,97,8,"updateLeadStage"],[78,25,97,23],[78,28,97,26],[78,34,97,26,"updateLeadStage"],[78,35,97,33,"leadId"],[78,41,97,47],[78,43,97,49,"stage"],[78,48,97,62],[78,53,97,85],[79,6,98,4],[79,10,98,8],[79,11,98,9,"token"],[79,16,98,14],[79,18,98,16],[79,25,98,23],[79,30,98,28],[80,6,100,4,"setError"],[80,14,100,12],[80,15,100,13],[80,19,100,17],[80,20,100,18],[81,6,102,4],[81,10,102,8],[82,8,103,6],[82,14,103,12,"response"],[82,22,103,20],[82,25,103,23],[82,31,103,29,"fetch"],[82,36,103,34],[82,37,103,35],[82,40,103,38,"API_BASE_URL"],[82,52,103,50],[82,66,103,64,"leadId"],[82,72,103,70],[82,88,103,86,"encodeURIComponent"],[82,106,103,104],[82,107,103,105,"stage"],[82,112,103,110],[82,113,103,111],[82,115,103,113],[82,117,103,115],[83,10,104,8,"method"],[83,16,104,14],[83,18,104,16],[83,25,104,23],[84,10,105,8,"headers"],[84,17,105,15],[84,19,105,17],[85,12,106,10],[85,27,106,25],[85,29,106,27],[85,39,106,37,"token"],[85,44,106,42],[85,46,106,44],[86,12,107,10],[86,26,107,24],[86,28,107,26],[87,10,108,8],[88,8,109,6],[88,9,109,7],[88,10,109,8],[89,8,111,6],[89,12,111,10,"response"],[89,20,111,18],[89,21,111,19,"ok"],[89,23,111,21],[89,25,111,23],[90,10,112,8],[91,10,113,8,"setLeads"],[91,18,113,16],[91,19,113,17,"prev"],[91,23,113,21],[91,27,114,10,"prev"],[91,31,114,14],[91,32,114,15,"map"],[91,35,114,18],[91,36,114,19,"lead"],[91,40,114,23],[91,44,115,12,"lead"],[91,48,115,16],[91,49,115,17,"id"],[91,51,115,19],[91,56,115,24,"leadId"],[91,62,115,30],[91,65,115,30,"Object"],[91,71,115,30],[91,72,115,30,"assign"],[91,78,115,30],[91,83,116,21,"lead"],[91,87,116,25],[92,12,116,27,"stage"],[92,17,116,32],[93,12,116,34,"last_interaction"],[93,28,116,50],[93,30,116,52],[93,34,116,56,"Date"],[93,38,116,60],[93,39,116,61],[93,40,116,62],[93,41,116,63,"toISOString"],[93,52,116,74],[93,53,116,75],[94,10,116,76],[94,15,117,16,"lead"],[94,19,118,10],[94,20,119,8],[94,21,119,9],[95,10,120,8],[95,17,120,15],[95,21,120,19],[96,8,121,6],[96,9,121,7],[96,15,121,13],[97,10,122,8],[97,16,122,14],[97,20,122,18,"Error"],[97,25,122,23],[97,26,122,24],[97,55,122,53],[97,56,122,54],[98,8,123,6],[99,6,124,4],[99,7,124,5],[99,8,124,6],[99,15,124,13,"err"],[99,18,124,21],[99,20,124,23],[100,8,125,6,"setError"],[100,16,125,14],[100,17,125,15,"err"],[100,20,125,18],[100,21,125,19,"message"],[100,28,125,26],[100,29,125,27],[101,8,126,6,"console"],[101,15,126,13],[101,16,126,14,"error"],[101,21,126,19],[101,22,126,20],[101,50,126,48],[101,52,126,50,"err"],[101,55,126,53],[101,56,126,54],[102,8,127,6],[102,15,127,13],[102,20,127,18],[103,6,128,4],[104,4,129,2],[104,5,129,3],[105,4,131,2],[105,10,131,8,"deleteLead"],[105,20,131,18],[105,23,131,21],[105,29,131,28,"leadId"],[105,35,131,42],[105,39,131,65],[106,6,132,4],[106,10,132,8],[106,11,132,9,"token"],[106,16,132,14],[106,18,132,16],[106,25,132,23],[106,30,132,28],[107,6,134,4,"setError"],[107,14,134,12],[107,15,134,13],[107,19,134,17],[107,20,134,18],[108,6,136,4],[108,10,136,8],[109,8,137,6],[109,14,137,12,"response"],[109,22,137,20],[109,25,137,23],[109,31,137,29,"fetch"],[109,36,137,34],[109,37,137,35],[109,40,137,38,"API_BASE_URL"],[109,52,137,50],[109,66,137,64,"leadId"],[109,72,137,70],[109,74,137,72],[109,76,137,74],[110,10,138,8,"method"],[110,16,138,14],[110,18,138,16],[110,26,138,24],[111,10,139,8,"headers"],[111,17,139,15],[111,19,139,17],[112,12,140,10],[112,27,140,25],[112,29,140,27],[112,39,140,37,"token"],[112,44,140,42],[112,46,140,44],[113,12,141,10],[113,26,141,24],[113,28,141,26],[114,10,142,8],[115,8,143,6],[115,9,143,7],[115,10,143,8],[116,8,145,6],[116,12,145,10,"response"],[116,20,145,18],[116,21,145,19,"ok"],[116,23,145,21],[116,25,145,23],[117,10,146,8,"setLeads"],[117,18,146,16],[117,19,146,17,"prev"],[117,23,146,21],[117,27,146,25,"prev"],[117,31,146,29],[117,32,146,30,"filter"],[117,38,146,36],[117,39,146,37,"lead"],[117,43,146,41],[117,47,146,45,"lead"],[117,51,146,49],[117,52,146,50,"id"],[117,54,146,52],[117,59,146,57,"leadId"],[117,65,146,63],[117,66,146,64],[117,67,146,65],[118,10,147,8],[118,17,147,15],[118,21,147,19],[119,8,148,6],[119,9,148,7],[119,15,148,13],[120,10,149,8],[120,16,149,14],[120,20,149,18,"Error"],[120,25,149,23],[120,26,149,24],[120,49,149,47],[120,50,149,48],[121,8,150,6],[122,6,151,4],[122,7,151,5],[122,8,151,6],[122,15,151,13,"err"],[122,18,151,21],[122,20,151,23],[123,8,152,6,"setError"],[123,16,152,14],[123,17,152,15,"err"],[123,20,152,18],[123,21,152,19,"message"],[123,28,152,26],[123,29,152,27],[124,8,153,6,"console"],[124,15,153,13],[124,16,153,14,"error"],[124,21,153,19],[124,22,153,20],[124,44,153,42],[124,46,153,44,"err"],[124,49,153,47],[124,50,153,48],[125,8,154,6],[125,15,154,13],[125,20,154,18],[126,6,155,4],[127,4,156,2],[127,5,156,3],[128,4,158,2],[128,8,158,2,"useEffect"],[128,14,158,11],[128,15,158,11,"useEffect"],[128,24,158,11],[128,26,158,12],[128,32,158,18],[129,6,159,4,"fetchLeads"],[129,16,159,14],[129,17,159,15],[129,18,159,16],[130,4,160,2],[130,5,160,3],[130,7,160,5],[130,8,160,6,"token"],[130,13,160,11],[130,14,160,12],[130,15,160,13],[131,4,162,2],[131,11,162,9],[132,6,163,4,"leads"],[132,11,163,9],[133,6,164,4,"loading"],[133,13,164,11],[134,6,165,4,"error"],[134,11,165,9],[135,6,166,4,"fetchLeads"],[135,16,166,14],[136,6,167,4,"createLead"],[136,16,167,14],[137,6,168,4,"updateLeadStage"],[137,21,168,19],[138,6,169,4,"deleteLead"],[139,4,170,2],[139,5,170,3],[140,2,171,0],[141,2,171,1,"_s"],[141,4,171,1],[141,5,31,16,"useLeads"],[141,13,31,24],[142,4,31,24],[142,12,35,20,"useAuth"],[142,32,35,27],[142,33,35,27,"useAuth"],[142,40,35,27],[143,2,35,27],[144,0,35,27],[144,3]],"functionMap":{"names":["<global>","useLeads","fetchLeads","createLead","setLeads$argument_0","updateLeadStage","prev.map$argument_0","deleteLead","prev.filter$argument_0","useEffect$argument_0"],"mappings":"AAA;OC8B;qBCQ;GD0B;qBEE;iBCiB,0BD;GFW;0BIE;iBDgB;mBEC;oBFG;WCC;GJW;qBME;iBHe,oBI,0BJ,CG;GNU;YQE;GRE;CDW"},"hasCjsExports":false},"type":"js/module"}]}